# DB モデリング３

## 課題１

> **Note:**
>
> - `directory_path`は、text 形式のスカラ値で用意するのが、一番取り扱いやすいと考えた
>   - `path/to/certain/subdirectory`みたいなスラッシュ区切りの text 形式
> - ドキュメントは論理削除で、別テーブルで用意
>   - CREATED-DOCUMENT からレコード削除 → DELETED-DOCUMENT にレコード追加
> - ドキュメントを含まない空ディレクトリ（= DIRECTORY-DOCUMENT-RELATIONSHIP との結びつきがなく、DIRECTORY テーブル単体のみに含まれるレコード）は物理削除

[![課題１のER図](https://mermaid.ink/img/pako:eNrNlM1q20AUhV9lmHX8At4ZSyGmaWwUZVEQmIk0iQXSjBmPSoMdaDQkkUMLoYsa025CE0hKky66CCnp00zlJqu8QseWf4QiGbrrSmL4zrnn3jtSF9rUwbAMMdNctMuQbxGLVLbMtboBer1SiXaBVjP0qlk3XoEysBlGHHeySNXQK6aulbR6deulvmEWk5q-rheRi0LZynO8ZOjrFbNW39hcqzWUdht7lOx2mpxa5FmIsUvvX13mgbsWAcBuIQZQwFuUNV0HNF4AC_7-9XkUnT68PaxpFhxDrxFLcwT5OI3Fp-_H3H66wYW54zJsc8r25v5SHMvwixTfZPhdikiKr7NCHL_hKUEb8VYuL8MPD2eX8mAowzsprqQQMryV4iJ-9zOOFHwiD25GH4_j60EcDbLZCqZUkHh1eeJEQO3Ax4Sn-L4Mr1UgKc6k-KEkYx6ASZBna-zmGjWKjXIWt5q7uGSeM1ObEq6eubbx0WF8czdVuT7ucOS3pzfXaaJ8UVJvNLgYDcOsNGg7y6R_bi8fPx0l0qf7iASeh7Y9_HTfn60r-x39v1NysIeXtBr3Tx6H54spqebgCvQx85HrqD_TpDEL8hb2sQXL6tXBOyjw-ARWaDJK3XHVnYTlHeR18ApUTdHNPWLPDxJq-pObnu7_BRqGGsY)](https://mermaid.live/edit#pako:eNrNlM1q20AUhV9lmHX8At4ZSyGmaWwUZVEQmIk0iQXSjBmPSoMdaDQkkUMLoYsa025CE0hKky66CCnp00zlJqu8QseWf4QiGbrrSmL4zrnn3jtSF9rUwbAMMdNctMuQbxGLVLbMtboBer1SiXaBVjP0qlk3XoEysBlGHHeySNXQK6aulbR6deulvmEWk5q-rheRi0LZynO8ZOjrFbNW39hcqzWUdht7lOx2mpxa5FmIsUvvX13mgbsWAcBuIQZQwFuUNV0HNF4AC_7-9XkUnT68PaxpFhxDrxFLcwT5OI3Fp-_H3H66wYW54zJsc8r25v5SHMvwixTfZPhdikiKr7NCHL_hKUEb8VYuL8MPD2eX8mAowzsprqQQMryV4iJ-9zOOFHwiD25GH4_j60EcDbLZCqZUkHh1eeJEQO3Ax4Sn-L4Mr1UgKc6k-KEkYx6ASZBna-zmGjWKjXIWt5q7uGSeM1ObEq6eubbx0WF8czdVuT7ucOS3pzfXaaJ8UVJvNLgYDcOsNGg7y6R_bi8fPx0l0qf7iASeh7Y9_HTfn60r-x39v1NysIeXtBr3Tx6H54spqebgCvQx85HrqD_TpDEL8hb2sQXL6tXBOyjw-ARWaDJK3XHVnYTlHeR18ApUTdHNPWLPDxJq-pObnu7_BRqGGsY)

## 課題２

ドキュメント順番機能

- ディレクトリ内のドキュメント順番を変更可能
- 順番はユーザー間でリアルタイム共有可能

> **Note:**
>
> - 索引番号をドキュメントのアトリビュートに持たせる方法は、レコードが増えれば増えるほど更新対象が増えるので、取り入れなかった
> - 前後の相対関係を表すアトリビュート`prev_item`, `next_item`を持たせることで、更新対象のレコードを最小限に抑えられると考えた（Notion で並び替えを行った際のリクエストを参考にした）

[![課題２のER図](https://mermaid.ink/img/pako:eNrNlFFL21AYhv_K4VzbP9C70kQsc7bEeDEIlGNytIHkpJyeyKQVZg5q6jYQL1aKu5FNcGO6iw2cw_2aY6pe-Rd20tQ2a5OCd7tKODzf-73v9-WkDU3PwrAIMVVstEmRaxCDlNb0paoGOp1CwWsDpaKpZb2qvQJFYFKMGG5NI2VNLemqUlCq5bWX6oqeTyrqsppHThpNdx7jBU1dLumV6srqUqUma9ex45HNVp15BpkxEat0nqsyNtw2CABmA1GAfNbwaN22QO0FMODtn4-D8Oj-zV5FMWAMbSGa5ghycRqLjt7H3E464ETcsik2mUe3x_qCH4jgk-DfRPBd8FDwr0-NGH7NUgVNxBqZvAiO70_PxW5fBNeCfxGci-BK8LPo3e8olPCh2L0cfDiILnpR2Jv2ljOlHMeL8x0nBZ7pu5iwFN8VwYU0JPip4D9kScwDMDQys8Z2plAtXyhjcYuZi0vm-SRqeoTJZ6ZstL8XXV6npJsUb9Vthl2J3538vP0VzzTLzuNNSHzHQesOfrzpphSIbP6PwttnKDDbxS2G3Obo9lh1lG08yTzonQ36wXSp37Tmld5dnT-c7Celsx7iT2b6Lv9vm5pEtbCD50SNuocP_c-TKclwcAG6mLrItuTfcRjMgKyBXWzAony18AbyHTaEJZqMUrVseS9gcQM5LbwAZShvdZuY44OEGv1oR6c7fwFSYl-9)](https://mermaid.live/edit#pako:eNrNlFFL21AYhv_K4VzbP9C70kQsc7bEeDEIlGNytIHkpJyeyKQVZg5q6jYQL1aKu5FNcGO6iw2cw_2aY6pe-Rd20tQ2a5OCd7tKODzf-73v9-WkDU3PwrAIMVVstEmRaxCDlNb0paoGOp1CwWsDpaKpZb2qvQJFYFKMGG5NI2VNLemqUlCq5bWX6oqeTyrqsppHThpNdx7jBU1dLumV6srqUqUma9ex45HNVp15BpkxEat0nqsyNtw2CABmA1GAfNbwaN22QO0FMODtn4-D8Oj-zV5FMWAMbSGa5ghycRqLjt7H3E464ETcsik2mUe3x_qCH4jgk-DfRPBd8FDwr0-NGH7NUgVNxBqZvAiO70_PxW5fBNeCfxGci-BK8LPo3e8olPCh2L0cfDiILnpR2Jv2ljOlHMeL8x0nBZ7pu5iwFN8VwYU0JPip4D9kScwDMDQys8Z2plAtXyhjcYuZi0vm-SRqeoTJZ6ZstL8XXV6npJsUb9Vthl2J3538vP0VzzTLzuNNSHzHQesOfrzpphSIbP6PwttnKDDbxS2G3Obo9lh1lG08yTzonQ36wXSp37Tmld5dnT-c7Celsx7iT2b6Lv9vm5pEtbCD50SNuocP_c-TKclwcAG6mLrItuTfcRjMgKyBXWzAony18AbyHTaEJZqMUrVseS9gcQM5LbwAZShvdZuY44OEGv1oR6c7fwFSYl-9)
