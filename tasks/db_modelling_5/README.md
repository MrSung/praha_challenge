# DB モデリング５

## 課題１

- Audit Table を用意して、記事テーブルのカラム一つひとつの変更を履歴として追う方法
  - 更新するカラムの数が多ければ多いほど有効

[![課題１のER図](https://mermaid.ink/img/pako:eNqdlN1K40AUx19lmGv7Ar0rtmKwqLTxLlBmM6c6kEwknbhIFdwGi6KCV7qLXnhRwUVWFARxWd2HGRP1LXbSyTYfLou7kIvhnN_5-P8nSR_bHgVcxeDXGVn2iWtxi9eWzNmFVqVptE20sVGpeH2Uhmot05huNiqtRrNmGgvz7VljEVXRB3A8vtzrCE8Vp8h_Vv-F_N0szdWW6oapym2PC8J4r7x53-IIBQGjSD2Lc8jCz3cXryfDl61to27hJLtGfHuF-IgTF_L56PAgATZzLf-4UTbC9oEIz--o40wy6unhNN45zI0aU8EqLVDxyW18dF2miC-Y7cCEern4_PR9TyN6pbzFb2Xm-UyjYMKBSVYOfsrBSIY7MrwscomdwMWEjIbb0dW9ZgRzoSeIu6r1Au2QDNSS4-Pz-MugjI-FF3GtPcMLyvTdvpUW3ZzH327f7VamqsvAoZn6cCjDHzI8Uurlpys5uJThVxmeFWs8h3bWiBMkrkWjXbVwtHug8GhrVHp94GMZfNzPg--7_H-1C09hF3yXMKo-4LFXFhYr4IKFq-pIoUsCR4xhheqeDcrUDrjaJU4PpjAJhNde5_YkoKn0X5BGN38BGPSq9Q)](https://mermaid.live/edit#pako:eNqdlN1K40AUx19lmGv7Ar0rtmKwqLTxLlBmM6c6kEwknbhIFdwGi6KCV7qLXnhRwUVWFARxWd2HGRP1LXbSyTYfLou7kIvhnN_5-P8nSR_bHgVcxeDXGVn2iWtxi9eWzNmFVqVptE20sVGpeH2Uhmot05huNiqtRrNmGgvz7VljEVXRB3A8vtzrCE8Vp8h_Vv-F_N0szdWW6oapym2PC8J4r7x53-IIBQGjSD2Lc8jCz3cXryfDl61to27hJLtGfHuF-IgTF_L56PAgATZzLf-4UTbC9oEIz--o40wy6unhNN45zI0aU8EqLVDxyW18dF2miC-Y7cCEern4_PR9TyN6pbzFb2Xm-UyjYMKBSVYOfsrBSIY7MrwscomdwMWEjIbb0dW9ZgRzoSeIu6r1Au2QDNSS4-Pz-MugjI-FF3GtPcMLyvTdvpUW3ZzH327f7VamqsvAoZn6cCjDHzI8Uurlpys5uJThVxmeFWs8h3bWiBMkrkWjXbVwtHug8GhrVHp94GMZfNzPg--7_H-1C09hF3yXMKo-4LFXFhYr4IKFq-pIoUsCR4xhheqeDcrUDrjaJU4PpjAJhNde5_YkoKn0X5BGN38BGPSq9Q)

## 課題２

- アプリケーションに利用されるような履歴データは、データベースでの保存する必要がある。一方で、後から履歴を分析したい場合には、前者のように最適化された履歴テーブルまでは持たさなくても、immutable にレコードを保存する限りは、別途履歴テーブルを作る必要はないと考える。

- History Table を使うパターン
  - 更新するカラムの数が少なければ少ないほど有効
