# DB モデリング３

## 課題１、課題２

課題２：ドキュメント順番機能

- ディレクトリ内のドキュメント順番を変更可能
- 順番はユーザー間でリアルタイム共有可能

> **Note:**
>
> - `directory_path`は、text 形式のスカラ値で用意するのが、一番取り扱いやすいと考えた
>   - `path/to/certain/subdirectory`みたいなスラッシュ区切りの text 形式
> - ドキュメントは論理削除して、別テーブルで削除済みドキュメントを管理する
>   - CREATED-DOCUMENT からレコード削除 → DELETED-DOCUMENT にレコード追加
> - ドキュメントを含まない空ディレクトリは、物理削除する
>   - DIRECTORY-DOCUMENT-RELATIONSHIP との結びつきがなく、DIRECTORY テーブル単体のみに含まれるレコード
> - 索引番号をドキュメントのアトリビュートに持たせる方法は、レコードが増えれば増えるほど更新対象が増えるので、取り入れなかった
> - 前後の相対関係を表すアトリビュート`prev_item`, `next_item`を持たせることで、更新対象のレコードを最小限に抑えられると考えた
>   - Notion で並び替えを行った際のリクエストを参考にした

[![課題１、課題２のER図](https://mermaid.ink/img/pako:eNrNlEFP2zAYhv-K5TP9A71VTRDVGK1COEyKVJnE0EiJU7kOGmqRRiwgZZuEdlhVsQsaSDANdtgkxsR-jUmBE39hTlPaKE0rcdsplvV8r9_3-2K3oelZGBYhpoqNNilyDWKQ0pq-VNVAp1MoeG2gVDS1rFe1N6AITIoRw60sUtbUkq4qBaVaXnutruizSUVdVmeRk4OyJ4_xgqYul_RKdWV1qVKTtevY8chmq848g0yZiFU6L1UZG24bBACzgShAPmt4tG5boPYKGPDu75dBePTwbq-iGDCGthBNcwS5OI1FRx9jbicdcCJu2RSbzKPbY33BD0TwVfDvIvgheCj4t-eDGH7LUgVNxBq5vAg-PZyci92-CG4EvxCci-Ba8LPow58olPCh2L0afD6ILntR2Mt6m9GlGY4X5ztOCjzTdzFhKb4rgktpSPATwX_KkpgHYGhkaoztXKHabKGcwS3mDi7p57Oo6REmv7my0f5edHWTkm5SvFVP-zHg_fGvu99xa_NcPd2GxHcctO7gp9tuSohID3lC718gxGwXtxhym6O7ZNVRfoykA4Pe2aAfZEv9pjWv9P76_PF4Pymd9hD_QNmb_b_NbRLVwg6eEzXqHj72TyddkuHgAnQxdZFtybdyGMyArIFdbMCiXFp4A_kOG8ISTVqpWra8JbC4gZwWXoAylLe6TczxRkKNnt3R7s4__DlldQ)](https://mermaid.live/edit#pako:eNrNlEFP2zAYhv-K5TP9A71VTRDVGK1COEyKVJnE0EiJU7kOGmqRRiwgZZuEdlhVsQsaSDANdtgkxsR-jUmBE39hTlPaKE0rcdsplvV8r9_3-2K3oelZGBYhpoqNNilyDWKQ0pq-VNVAp1MoeG2gVDS1rFe1N6AITIoRw60sUtbUkq4qBaVaXnutruizSUVdVmeRk4OyJ4_xgqYul_RKdWV1qVKTtevY8chmq848g0yZiFU6L1UZG24bBACzgShAPmt4tG5boPYKGPDu75dBePTwbq-iGDCGthBNcwS5OI1FRx9jbicdcCJu2RSbzKPbY33BD0TwVfDvIvgheCj4t-eDGH7LUgVNxBq5vAg-PZyci92-CG4EvxCci-Ba8LPow58olPCh2L0afD6ILntR2Mt6m9GlGY4X5ztOCjzTdzFhKb4rgktpSPATwX_KkpgHYGhkaoztXKHabKGcwS3mDi7p57Oo6REmv7my0f5edHWTkm5SvFVP-zHg_fGvu99xa_NcPd2GxHcctO7gp9tuSohID3lC718gxGwXtxhym6O7ZNVRfoykA4Pe2aAfZEv9pjWv9P76_PF4Pymd9hD_QNmb_b_NbRLVwg6eEzXqHj72TyddkuHgAnQxdZFtybdyGMyArIFdbMCiXFp4A_kOG8ISTVqpWra8JbC4gZwWXoAylLe6TczxRkKNnt3R7s4__DlldQ)
