# DB モデリング４

## 課題１

- ユーザー ID は、[メンバー ID](https://help.receptionist.jp/?p=1100) と同じ
- リマインダーは作成のみで、更新はできず、削除はできる
  - リマインダー削除後に再度参照することはないと判断し、物理削除
- リマインダー送信頻度も物理削除前提だが、外部キー制約を持たせてることで、リマインダー側で使用されている場合は削除できなくする
- リマインダー次回送信日時は、バッチ処理（cron job?）のタイミングで更新をかける
  - リマインダー次回送信日時のタイムゾーンは、ユーザーが設定しているタイムゾーンに従う
  - リマインダーの完了フラグが `true` の場合、リマインダー次回送信日時の更新をかけない

[![課題１のER図](https://mermaid.ink/img/pako:eNqdk09r2zAYxr-K0HU1NLCTb6XxWGjXlaS9GYJqK6khljLZHmRpIbbZlsFKc-nC1q40pS3t_oRBxwZZun4YRe5y6leYYmeLO5LLLuZF-r2PnvexVIcGNTFUIWZZC5UZsnWik8LywuKSsl7Q8mBrS1FoHeS1R7mVrJZXJltKXlteWMs9Xik8zK0CFWzgCiVlp-hSnfzB_7P9joO6TgAwNhEDlglWl4AOeXjGwz4PvslvLqvDEfAUsZgxLadaQbUiQTaW6K_O-c1JT7R2EgoTzwauZeNnlIy2eXDNgxMeHvHg50gyvLztN9fXFpVMRp2f540DWd_L3Jf1bf_VSGI7Nds0Yx94eBgrXvKwkbK3QWkFIwIsp2gmR4vu60HvBQ_3eHjBgy93p7Cx46AynioZvXk5fH-c8DFcYviJh4lRm4oPG_7gujM8-iF6Z3I4g1Eiro5Ff5f7XbHfE913w73vUlN8botmezwmiENyXGRXgcEwcrFZRO5U_cHVQdRsRe3T6G3wbyvDtkVmdkafOmL_MPE36U8lPPO2TJL3HMyKMv4Ho_gTKfG8KUebdkfijsRTqitNcv_jzdcW90-5vzvrZ0qDcA7amNnIMuXLic3o0N3ENtahKksTl5BXcWNYol7VlAFqpuVSBtUSqjh4DiLPpYUaMf4uJNT4EY5Xt38DB4WbrQ)](https://mermaid.live/edit#pako:eNqdk09r2zAYxr-K0HU1NLCTb6XxWGjXlaS9GYJqK6khljLZHmRpIbbZlsFKc-nC1q40pS3t_oRBxwZZun4YRe5y6leYYmeLO5LLLuZF-r2PnvexVIcGNTFUIWZZC5UZsnWik8LywuKSsl7Q8mBrS1FoHeS1R7mVrJZXJltKXlteWMs9Xik8zK0CFWzgCiVlp-hSnfzB_7P9joO6TgAwNhEDlglWl4AOeXjGwz4PvslvLqvDEfAUsZgxLadaQbUiQTaW6K_O-c1JT7R2EgoTzwauZeNnlIy2eXDNgxMeHvHg50gyvLztN9fXFpVMRp2f540DWd_L3Jf1bf_VSGI7Nds0Yx94eBgrXvKwkbK3QWkFIwIsp2gmR4vu60HvBQ_3eHjBgy93p7Cx46AynioZvXk5fH-c8DFcYviJh4lRm4oPG_7gujM8-iF6Z3I4g1Eiro5Ff5f7XbHfE913w73vUlN8botmezwmiENyXGRXgcEwcrFZRO5U_cHVQdRsRe3T6G3wbyvDtkVmdkafOmL_MPE36U8lPPO2TJL3HMyKMv4Ho_gTKfG8KUebdkfijsRTqitNcv_jzdcW90-5vzvrZ0qDcA7amNnIMuXLic3o0N3ENtahKksTl5BXcWNYol7VlAFqpuVSBtUSqjh4DiLPpYUaMf4uJNT4EY5Xt38DB4WbrQ)

[![バッチ実行時の動作イメージ](https://mermaid.ink/img/pako:eNqNUktLw0AQ_ithTwoV70X0olcvehEWSmxWDZqkJOlB2kJ3VyXViCJoEeuj4Fupgh7UVvtjJhvbk3_BTVNErK_bzvDN95idHEpbGkFJNGurmTllchSbipK2ieqSlE0M3dSI3YcR8EvgB8COgd8BLwJvBM-V0NvEqP-bAWVgYFjRnZSrOvMpzTJJLmLYBM6BU1E7bFX9cJcBvRqatgeHgTWBPQK7ETU_eFoBvg38AtgtUN-1s2QEo0Kk8ZmvI5CfIk7eca3M70bD66rYO2gXadCshuWTSJhthXv34Y5UKAO9BLoEtAb0DIo0NtTDIa0A3QfmB_WT4GFVkgEryTKe7gy9Nbx_aUumIn3deBGVc1kKrw7MA7YqSutyHxEfW3trlLp77c08buWzGe3P35ERY9VOxEPx4v8c7tsF_YCNUe2jung6lSixzKXr1rn3Wit3lE7jxXbtf3HacxbYRAlkENtQdU2eYC6awcidIwbBKCmfGplRswsuRtgsSGjMN6bprmWj5Iy64JAEUrOuNbFopj8aMWpUV-VJG91u4R3Rr4dK)](https://mermaid.live/edit#pako:eNqNUktLw0AQ_ithTwoV70X0olcvehEWSmxWDZqkJOlB2kJ3VyXViCJoEeuj4Fupgh7UVvtjJhvbk3_BTVNErK_bzvDN95idHEpbGkFJNGurmTllchSbipK2ieqSlE0M3dSI3YcR8EvgB8COgd8BLwJvBM-V0NvEqP-bAWVgYFjRnZSrOvMpzTJJLmLYBM6BU1E7bFX9cJcBvRqatgeHgTWBPQK7ETU_eFoBvg38AtgtUN-1s2QEo0Kk8ZmvI5CfIk7eca3M70bD66rYO2gXadCshuWTSJhthXv34Y5UKAO9BLoEtAb0DIo0NtTDIa0A3QfmB_WT4GFVkgEryTKe7gy9Nbx_aUumIn3deBGVc1kKrw7MA7YqSutyHxEfW3trlLp77c08buWzGe3P35ERY9VOxEPx4v8c7tsF_YCNUe2jung6lSixzKXr1rn3Wit3lE7jxXbtf3HacxbYRAlkENtQdU2eYC6awcidIwbBKCmfGplRswsuRtgsSGjMN6bprmWj5Iy64JAEUrOuNbFopj8aMWpUV-VJG91u4R3Rr4dK)
